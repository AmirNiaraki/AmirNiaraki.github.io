---
layout: default
title: "Amir Niaraki - Research Scientist"
---

    <nav class="nav">
        <a href="#" class="nav-link" onclick="window.scrollTo({top: 0, behavior: 'smooth'}); return false;">Home</a>
        <a href="#projects" class="nav-link">Projects</a>
        <a href="#publications" class="nav-link">Patents & Publications</a>
        <a href="#contact" class="nav-link">Contact</a>
    </nav>

        <header class="header">
            <div class="profile-section">
                <div class="profile-left">
                    <img src="assets/images/profile_picture.jpg" alt="Amir Niaraki" class="profile-picture">
                    <div class="profile-info">
                        <h1 class="name">Amir Niaraki</h1>
                        <p class="title">PhD, Iowa State University. Mechanical Engineering and Computer Science</p>
                    </div>
                </div>
                <div class="profile-right">
                    <p class="description">
                        I'm a Research Scientist and Manager of  <a href="https://www.musco.com" target="_blank" rel="noopener">Musco</a> AI Team. My core scientific interests are computational perception and intelligent machines, particularly how to accurately localize objects or sense a scene using traditional computer vision methods or deep learning. This fascination traces back to my master's thesis on reinforcement learning for robot path planning and other neural network models for scene perception.
                    </p>
                    <p class="description">
                        My first Ph.D. focused on electrochemical and visual sensing of rat dopaminergic neurons—a different kind of neural network, this time on a chip! I'm currently affiliated with the <a href="https://www.cs.iastate.edu/people/amir-niaraki-asli" target="_blank" rel="noopener">Department of Computer Science</a> at Iowa State University, where our latest publications explore the bird's-eye coverage problem in large outdoor environments.
                    </p>
                    <div class="research-interests">
                        <span class="research-tag">Computer Vision</span>
                        <span class="research-tag">Vision Transformers</span>
                        <span class="research-tag">Generative AI</span>
                        <span class="research-tag">Reinforcement Learning</span>
                        <span class="research-tag">Pattern Recognition</span>
                        <span class="research-tag">Neuronal Sensing</span>

                    </div>
                    <div class="profile-contact-links">
                        <a href="mailto:niaraki@iastate.edu" class="profile-contact-link">
                            <img src="assets/images/icons/mail.png" alt="Email" class="profile-contact-icon">Email
                        </a>
                        <a href="https://github.com/AmirNiaraki" class="profile-contact-link" target="_blank" rel="noopener">
                            <img src="assets/images/icons/github.png" alt="GitHub" class="profile-contact-icon">GitHub
                        </a>
                        <a href="https://scholar.google.com/citations?user=YOUR_SCHOLAR_ID" class="profile-contact-link" target="_blank" rel="noopener">
                            <img src="assets/images/icons/gscholar.png" alt="Google Scholar" class="profile-contact-icon">Google Scholar
                        </a>
                        <a href="https://www.linkedin.com/in/amir-niaraki-71724688/" class="profile-contact-link" target="_blank" rel="noopener">
                            <img src="assets/images/icons/linkedin.png" alt="LinkedIn" class="profile-contact-icon">LinkedIn
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <section id="projects" class="section">
            <h2 class="section-title">Projects</h2>
            <div class="projects-grid" id="projects-container">
                <!-- Projects will be loaded here by JavaScript -->
            </div>
        </section>

        <section id="publications" class="section">
            <h2 class="section-title">Papers and Patents</h2>
            <ol class="publications-list" id="publications-container">
                <!-- Publications will be loaded here by JavaScript -->
            </ol>
        </section>

        <section id="contact" class="section">
            <h2 class="section-title">Contact</h2>
            <div class="contact-links">
                <a href="mailto:niaraki@iastate.edu" class="contact-link">
                    <img src="assets/images/icons/mail.png" alt="Email" class="contact-icon">Email
                </a>
                <a href="https://github.com/AmirNiaraki" class="contact-link" target="_blank" rel="noopener">
                    <img src="assets/images/icons/github.png" alt="GitHub" class="contact-icon">GitHub
                </a>
                <a href="https://scholar.google.com/citations?user=YOUR_SCHOLAR_ID" class="contact-link" target="_blank" rel="noopener">
                    <img src="assets/images/icons/gscholar.png" alt="Google Scholar" class="contact-icon">Google Scholar
                </a>
                <a href="https://www.linkedin.com/in/amir-niaraki-71724688/" class="contact-link" target="_blank" rel="noopener">
                    <img src="assets/images/icons/linkedin.png" alt="LinkedIn" class="contact-icon">LinkedIn
                </a>
            </div>
        </section>
    </div>

    <!-- Image/Video Modal -->
    <div id="imageModal" class="image-modal">
        <span class="image-modal-close">&times;</span>
        <button class="image-modal-prev" id="modalPrev" aria-label="Previous">&#8249;</button>
        <button class="image-modal-next" id="modalNext" aria-label="Next">&#8250;</button>
        <div class="modal-content-wrapper" id="modalContentWrapper">
            <img class="image-modal-content" id="modalImage" style="display: none;">
            <div class="video-modal-content" id="modalVideo" style="display: none;"></div>
        </div>
        <div class="image-modal-caption" id="modalCaption"></div>
        <div class="image-modal-counter" id="modalCounter"></div>
    </div>

    <script>
        // Gallery state
        let currentGallery = [];
        let currentImageIndex = 0;
        let currentProjectIndex = -1;
        let currentVideoIframe = null;
        
        // Helper functions for YouTube
        function extractYouTubeId(urlOrId) {
            if (!urlOrId) return null;
            
            // If it's already just an ID (11 characters, alphanumeric)
            if (/^[a-zA-Z0-9_-]{11}$/.test(urlOrId)) {
                return { id: urlOrId, timestamp: null };
            }
            
            // Extract from various YouTube URL formats
            const patterns = [
                /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,
                /youtube\.com\/.*[?&]v=([a-zA-Z0-9_-]{11})/
            ];
            
            for (const pattern of patterns) {
                const match = urlOrId.match(pattern);
                if (match) {
                    // Extract timestamp if present (t=46s or t=1h2m3s format)
                    const timestampMatch = urlOrId.match(/[?&]t=([0-9hms]+)/);
                    const timestamp = timestampMatch ? timestampMatch[1] : null;
                    return { id: match[1], timestamp: timestamp };
                }
            }
            
            return null;
        }
        
        function isYouTubeVideo(item) {
            const result = extractYouTubeId(item);
            return result !== null;
        }
        
        function getYouTubeThumbnail(videoId) {
            // videoId can be either string or object with id property
            const id = typeof videoId === 'string' ? videoId : videoId.id;
            if (!id) return '';
            return `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
        }
        
        function getYouTubeEmbedUrl(videoId, autoplay = true) {
            // videoId can be either string or object with id and timestamp
            const id = typeof videoId === 'string' ? videoId : videoId.id;
            if (!id) return '';
            
            const timestamp = typeof videoId === 'object' && videoId.timestamp ? videoId.timestamp : null;
            
            // Always use HTTPS explicitly for GitHub Pages compatibility
            let embedUrl = `https://www.youtube.com/embed/${id}?autoplay=${autoplay ? 1 : 0}&rel=0&enablejsapi=1`;
            if (timestamp) {
                // Convert timestamp to seconds if needed
                let seconds = 0;
                if (/^\d+$/.test(timestamp)) {
                    // Just seconds
                    seconds = parseInt(timestamp, 10);
                } else {
                    // Parse formats like "1h2m3s" or "2m3s"
                    const hours = timestamp.match(/(\d+)h/);
                    const minutes = timestamp.match(/(\d+)m/);
                    const secs = timestamp.match(/(\d+)s/);
                    if (hours) seconds += parseInt(hours[1], 10) * 3600;
                    if (minutes) seconds += parseInt(minutes[1], 10) * 60;
                    if (secs) seconds += parseInt(secs[1], 10);
                }
                embedUrl += `&start=${seconds}`;
            }
            return embedUrl;
        }

        // Load and render projects
        async function loadProjects() {
            try {
                const response = await fetch('{{ "/assets/projects.json" | relative_url }}?v=' + Date.now());
                const data = await response.json();
                // Keep projects in JSON order (no sorting)
                const projects = data.projects;
                
                const container = document.getElementById('projects-container');
                container.innerHTML = projects.map((p, projectIndex) => {
                    // Build gallery array - use gallery if available, otherwise fall back to main image
                    const gallery = (p.gallery && p.gallery.length > 0) ? p.gallery : [p.image];
                    
                    // Process gallery items - keep original format for detection
                    const galleryItems = gallery.map(item => {
                        const youtubeData = extractYouTubeId(item);
                        if (youtubeData) {
                            return { type: 'youtube', id: youtubeData.id, timestamp: youtubeData.timestamp, original: item };
                        } else {
                            return { type: 'image', path: item.includes('/') ? item : 'assets/images/' + item, original: item };
                        }
                    });
                    
                    // Find index of main image in gallery
                    const mainImagePath = p.image.includes('/') ? p.image : 'assets/images/' + p.image;
                    const mainImageIndex = galleryItems.findIndex(item => item.type === 'image' && item.path === mainImagePath);
                    const startIndex = mainImageIndex >= 0 ? mainImageIndex : 0;
                    
                    // Build gallery thumbnails HTML
                    const galleryThumbnails = galleryItems.length > 1 ? galleryItems.map((item, imgIndex) => {
                        let thumbnailSrc;
                        if (item.type === 'youtube') {
                            thumbnailSrc = getYouTubeThumbnail(item.id);
                        } else {
                            thumbnailSrc = item.path;
                        }
                        return `
                        <div class="gallery-thumbnail ${item.type === 'youtube' ? 'video-thumbnail' : ''}" onclick="event.stopPropagation(); openGalleryModal(${projectIndex}, ${imgIndex})">
                            <img src="${thumbnailSrc}" alt="${item.type === 'youtube' ? 'Video' : 'Gallery image'} ${imgIndex + 1}" onerror="this.src='assets/images/research_placeholder_icon.jpg'">
                            ${item.type === 'youtube' ? '<div class="video-play-icon">▶</div>' : ''}
                        </div>
                    `;
                    }).join('') : '';
                    
                    // Determine main display item
                    const mainItem = galleryItems[startIndex] || galleryItems[0];
                    const mainDisplaySrc = mainItem && mainItem.type === 'youtube' 
                        ? getYouTubeThumbnail(mainItem.id) 
                        : mainImagePath;
                    const isMainVideo = mainItem && mainItem.type === 'youtube';
                    
                    return `
                    <div class="project-card" data-project-index="${projectIndex}">
                        <div class="project-image-container">
                            <div class="project-image" onclick="openGalleryModal(${projectIndex}, ${startIndex})">
                                <img src="${mainDisplaySrc}" 
                                     alt="${p.title || p.name}" 
                                     onerror="this.src='assets/images/research_placeholder_icon.jpg'">
                                ${isMainVideo ? '<div class="video-play-overlay">▶</div>' : ''}
                            </div>
                            ${galleryThumbnails ? `<div class="gallery-thumbnails" id="gallery-${projectIndex}">${galleryThumbnails}</div>` : ''}
                        </div>
                        <div class="project-content" onclick="handleProjectContentClick(event, ${projectIndex})">
                            <div class="project-header">
                                <h3 class="project-title">${p.title || p.name}</h3>
                                <span class="project-year">${p.year || (p.end_year ? (p.start_year === p.end_year ? p.start_year : `${p.start_year} - ${p.end_year}`) : `${p.start_year} - ongoing`)}</span>
                            </div>
                            ${p.code ? `
                                <div class="project-code-link">
                                    <a class="project-link code-link" href="${p.code}" target="_blank" rel="noopener">View Code</a>
                                </div>
                            ` : ''}
                            ${p.description ? `<p class="project-description" id="desc-${projectIndex}">${p.description}</p>` : ''}
                            ${p.papers && p.papers.length > 0 ? `
                                <div class="publications-section">
                                    <h4 class="publications-title">Publications</h4>
                                    <div class="publications-links">
                                        ${p.papers.sort((a, b) => (b.year || 0) - (a.year || 0)).map((paper) => 
                                            `<a class="project-link" href="${paper.url}" target="_blank" rel="noopener">${paper.title}</a>`
                                        ).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            ${p.links ? `
                                <div class="project-links">
                                    ${p.links.map(l => `<a class="project-link" href="${l.url}" target="_blank" rel="noopener">${l.label}</a>`).join('')}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                }).join('');
                
                // Store projects data globally for gallery access (sorted array)
                window.projectsData = projects;
            } catch (error) {
                console.error('Error loading projects:', error);
            }
        }

        // Load and render publications
        async function loadPublications() {
            try {
                const response = await fetch('{{ "/assets/publications.json" | relative_url }}?v=' + Date.now());
                const data = await response.json();
                // Sort publications by year (latest first)
                const publications = data.publications.sort((a, b) => (b.year || 0) - (a.year || 0));
                
                const container = document.getElementById('publications-container');
                container.innerHTML = publications.map(pub => `
                    <li class="publication-item">
                        <p class="publication-text">
                            ${pub.text || `${pub.title}${pub.authors ? ', ' + pub.authors : ''}${pub.venue ? ', ' + pub.venue : ''}${pub.year ? ', ' + pub.year : ''}.`}
                        </p>
                    </li>
                `).join('');
            } catch (error) {
                console.error('Error loading publications:', error);
            }
        }

        // Reload all data
        function reloadData() {
            loadProjects();
            loadPublications();
        }

        // Gallery modal functions
        function openGalleryModal(projectIndex, imageIndex = 0) {
            if (!window.projectsData) return;
            
            const project = window.projectsData[projectIndex];
            const gallery = (project.gallery && project.gallery.length > 0) ? project.gallery : [project.image];
            
            // Process gallery items
            const galleryItems = gallery.map(item => {
                const youtubeData = extractYouTubeId(item);
                if (youtubeData) {
                    return { type: 'youtube', id: youtubeData.id, timestamp: youtubeData.timestamp, original: item };
                } else {
                    return { type: 'image', path: item.includes('/') ? item : 'assets/images/' + item, original: item };
                }
            });
            
            currentGallery = galleryItems;
            currentImageIndex = Math.min(imageIndex, galleryItems.length - 1);
            currentProjectIndex = projectIndex;
            
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const modalCaption = document.getElementById('modalCaption');
            const modalCounter = document.getElementById('modalCounter');
            const prevBtn = document.getElementById('modalPrev');
            const nextBtn = document.getElementById('modalNext');
            
            modal.style.display = 'block';
            updateGalleryImage();
            
            // Buttons are never disabled in circular gallery
            prevBtn.disabled = false;
            nextBtn.disabled = false;
            
            // Show/hide counter
            if (currentGallery.length > 1) {
                modalCounter.style.display = 'block';
            } else {
                modalCounter.style.display = 'none';
            }
            
            // Prevent body scroll when modal is open
            document.body.style.overflow = 'hidden';
        }
        
        function stopCurrentVideo() {
            // Stop any currently playing video
            if (currentVideoIframe) {
                // Clear the src to stop the video completely
                currentVideoIframe.src = '';
                currentVideoIframe = null;
            }
        }
        
        function updateGalleryImage() {
            const modalImg = document.getElementById('modalImage');
            const modalVideo = document.getElementById('modalVideo');
            const modalCaption = document.getElementById('modalCaption');
            const modalCounter = document.getElementById('modalCounter');
            const prevBtn = document.getElementById('modalPrev');
            const nextBtn = document.getElementById('modalNext');
            
            if (currentGallery.length === 0) return;
            
            // Stop any currently playing video before switching
            stopCurrentVideo();
            
            const project = (window.projectsData && currentProjectIndex >= 0) ? window.projectsData[currentProjectIndex] : null;
            const currentItem = currentGallery[currentImageIndex];
            
            // Hide both, then show the appropriate one
            modalImg.style.display = 'none';
            modalVideo.style.display = 'none';
            modalVideo.innerHTML = '';
            
            // Ensure modal content wrapper is visible and properly positioned
            const modalContentWrapper = document.getElementById('modalContentWrapper');
            if (modalContentWrapper) {
                modalContentWrapper.style.display = 'flex';
            }
            
            if (currentItem.type === 'youtube') {
                // Show YouTube video
                const iframe = document.createElement('iframe');
                const videoData = { id: currentItem.id, timestamp: currentItem.timestamp };
                const embedUrl = getYouTubeEmbedUrl(videoData, true);
                
                // Debug logging for GitHub Pages troubleshooting
                if (typeof console !== 'undefined' && console.log) {
                    console.log('Loading YouTube video:', embedUrl);
                }
                
                // Set iframe attributes explicitly for GitHub Pages compatibility
                iframe.setAttribute('src', embedUrl);
                iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                iframe.setAttribute('allowfullscreen', 'true');
                iframe.setAttribute('frameborder', '0');
                iframe.setAttribute('class', 'youtube-embed');
                iframe.style.width = '100%';
                iframe.style.height = '100%';
                iframe.style.border = 'none';
                
                modalVideo.appendChild(iframe);
                modalVideo.style.display = 'block';
                modalVideo.style.margin = '0 auto';
                
                // Store reference to current iframe
                currentVideoIframe = iframe;
            } else {
                // Show image
                modalImg.src = currentItem.path;
                modalImg.style.display = 'block';
            }
            
            modalCaption.textContent = project ? (project.title || project.name) : '';
            modalCounter.textContent = `${currentImageIndex + 1} of ${currentGallery.length}`;
            
            // Buttons are never disabled in circular gallery
            prevBtn.disabled = false;
            nextBtn.disabled = false;
        }
        
        function nextImage() {
            if (currentGallery.length === 0) return;
            // Circular navigation: wrap around to first image if at the end
            currentImageIndex = (currentImageIndex + 1) % currentGallery.length;
            updateGalleryImage();
        }
        
        function prevImage() {
            if (currentGallery.length === 0) return;
            // Circular navigation: wrap around to last image if at the beginning
            currentImageIndex = (currentImageIndex - 1 + currentGallery.length) % currentGallery.length;
            updateGalleryImage();
        }

        function closeImageModal() {
            // Stop any playing video before closing
            stopCurrentVideo();
            
            const modal = document.getElementById('imageModal');
            const modalVideo = document.getElementById('modalVideo');
            
            // Clear video iframe completely
            modalVideo.innerHTML = '';
            modalVideo.style.display = 'none';
            
            modal.style.display = 'none';
            
            // Restore body scroll
            document.body.style.overflow = 'auto';
        }
        
        // Handle project content click (expand description, but not on links)
        function handleProjectContentClick(event, projectIndex) {
            // Don't expand if clicking on a link, button, or inside publications section
            const target = event.target;
            if (target.tagName === 'A' || target.closest('a') || target.closest('.publications-section') || target.closest('.project-links')) {
                return;
            }
            event.stopPropagation();
            toggleDescription(projectIndex);
        }
        
        // Toggle description expansion
        function toggleDescription(projectIndex) {
            const descElement = document.getElementById(`desc-${projectIndex}`);
            const galleryThumbnails = document.getElementById(`gallery-${projectIndex}`);
            
            if (descElement) {
                const isExpanding = !descElement.classList.contains('expanded');
                descElement.classList.toggle('expanded');
                
                // Show all gallery thumbnails when expanded
                if (galleryThumbnails) {
                    if (isExpanding) {
                        galleryThumbnails.classList.add('expanded');
                    } else {
                        galleryThumbnails.classList.remove('expanded');
                    }
                }
            }
        }

        // Close modal when clicking outside the image
        function closeModalOnClick(event) {
            const modal = document.getElementById('imageModal');
            if (event.target === modal) {
                closeImageModal();
            }
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadProjects();
            loadPublications();
            
            // Add event listeners for modal
            const closeBtn = document.querySelector('.image-modal-close');
            const modal = document.getElementById('imageModal');
            
            closeBtn.addEventListener('click', closeImageModal);
            modal.addEventListener('click', closeModalOnClick);
            
            // Add event listeners for gallery navigation
            const prevBtn = document.getElementById('modalPrev');
            const nextBtn = document.getElementById('modalNext');
            
            if (prevBtn) {
                prevBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    prevImage();
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    nextImage();
                });
            }
            
            // Close modal with Escape key, navigate with arrow keys
            document.addEventListener('keydown', function(e) {
                const modal = document.getElementById('imageModal');
                if (modal.style.display === 'block') {
                    if (e.key === 'Escape') {
                        closeImageModal();
                    } else if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        prevImage();
                    } else if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        nextImage();
                    }
                }
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    reloadData();
                    console.log('Data reloaded!');
                }
            });
        });
    </script>
</body>
</html>
